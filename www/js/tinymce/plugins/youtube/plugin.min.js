(function(tiny)
{
	tiny.PluginManager.add("youtube",
		function(editor, url)
		{
			function showDialog()
			{
				editor.windowManager.open({
					title: "Insert a YouTube Video",
					file: url + "/display.html",
					width: 800,
					height: 530,
					inline: 1,
					resizable: true
				});
			}
		
			editor.addButton("youtube",{
				icon: true,
				image: url + "/img/youtube.gif",
				tooltip: "Add a YouTube Video",
				onclick: showDialog,
				onPostRender: function()
				{
					var self = this;
					editor.on("NodeChange", function(e)
					{
						self.active(e.element.nodeName === "IMG");
					});
				}
			});
		});
}(tinymce));