<?php
  
?>
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>EnrollmentForm</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    <div class="container">

        <div class="col-sm-8 col-sm-offset-2">

          <form class="form-horizontal">
            <legend><strong>Enrollment Form</strong></legend>
            <div class="form-group">
              <label for="lName" class="control-label col-sm-3">Last Name</label>
              <div class="col-sm-9">
                <input type="text" class="form-control" id="lName" placeholder="Last Name">
              </div>
            </div>

            <div class="form-group">
              <label for="fName" class="control-label col-sm-3">First Name</label>
              <div class="col-sm-9">
                <input type="text" class="form-control" id="fName" placeholder="First Name">
              </div>
            </div>

            <div class="form-group">
              <label for="streetAddress" class="control-label col-sm-3">Street Address</label>
              <div class="col-sm-9">
                <textarea type="text" class="form-control" id="streetAddress" placeholder="Street Address"
                          rows="3">
                </textarea>
              </div>
            </div>

            <div class="form-group">
              <label for="city" class="control-label col-sm-3">City</label>
              <div class="col-sm-9">
                <input type="text" class="form-control" id="city" placeholder="City">
              </div>
            </div>

            <div class="form-group">
              <label for="phone" class="control-label col-sm-3">Phone</label>
              <div class="col-sm-9">
                <input type="tel" class="form-control" id="phone" placeholder="Phone Number">
              </div>
            </div>

            <div class="form-group">
              <label for="email" class="control-label col-sm-3">Email</label>
              <div class="col-sm-9">
                <input type="email" class="form-control" id="email" placeholder="johnDoe@abc.com">
              </div>
            </div>

            <div class="form-group">
              <label for="dob" class="control-label col-sm-3">Date of Birth</label>
              <div class="col-sm-9">
                <input type="date" class="form-control" id="dob">
              </div>
            </div>

            <div class="form-group">
              <div class="control-label col-sm-3" style="font-weight:bold">Gender</div>
              <label class="radio-inline col-sm-offset-1"><input type="radio" name="gender" value="Male">Male</label>
              <label class="radio-inline"><input type="radio" name="gender" value="Female">Female</label>
            </div>

            <div class="form-group">
              <label for="healthHistory" class="control-label col-sm-3">Health History</label>
              <div class="col-sm-9">
                <textarea type="text" class="form-control" id="healthHistory" rows="3">
                </textarea>
              </div>
            </div>

            <div class="form-group">
              <label class="control-label col-sm-4">Do you watch Sit and Be Fit?</label>
              <label class="radio-inline"><input type="radio" name="watchSbf" value="yes">Yes</label>
              <label class="radio-inline"><input type="radio" name="watchSbf" value="no">No</label>
            </div>

            <div class="form-group" id="howManyTimes">
              <label for="howMany" class="control-label col-sm-3">How many times a week?</label>
              <div class="col-sm-9">
                <input type="number" class="form-control" id="howMany">
              </div>
            </div>

            <div class="form-group">
              <label class="control-label col-sm-4">Control Group (will NOT participate in Sit and Be Fit)
              </label>
              <label class="radio-inline"><input type="radio" name="controlGrp" value="yes">Yes</label>
              <label class="radio-inline"><input type="radio" name="controlGrp" value="no">No</label>
            </div>

            <div class="form-group">
              <label class="control-label col-sm-4">Experimental Group (participate in Sit and Be Fit)
              </label>
              <label class="radio-inline"><input type="radio" name="experimentalGrp" value=1>Yes
              </label>
              <label class="radio-inline"><input type="radio" name="experimentalGrp" value=0>No
              </label>
            </div>

            <input class="col-sm-offset-11 btn-primary" type="submit" id="submitButton">

          </form>

         </div>
         <div id="returnMessage" class="alert"></div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js">

      $("#submitButton").on('Click', function() {
        var payload = convertFormToJson();
        $.ajax({
          type: 'POST',
          url: 'formController.php',
          data: JSON.stringify(payload),
          contentType: 'application/json charset=utf-8',
          success: function(returnData) {
            var message = "<strong>Success!</strong> " + returnData;
            $('#returnMessage').removeClass('alert-danger').addClass('alert-success');
            $('#returnMessage').html(message);
            $('#returnMessage').show();
          },
          error: function(xhr, error, status) {
             var message = "<strong>Error!</strong> " + returnData;
            $('#returnMessage').removeClass('alert-success').addClass('alert-danger');
            $('#returnMessage').html(message);
            $('#returnMessage').show();
          }
        });
      });

      function convertFormToJson () {
        var json = [];
        json['action'] = 'enrollment';
        json['LastName'] = $('#lName').val();
        json['FirstName'] = $('#fName').val();
        json['StreetAddress'] = $('#streetAddress').val();
        json['City'] = $('city').val();
        json['Phone'] = $('phone').val();
        json['Email'] = $('#email').val();
        json['DOB'] = $('#dob').val();
        json['Gender'] = $("input[name='gender']:checked").val();
        json['HealthHistory'] = $('#healthHistory').val();
        json['WatchSbf'] = $('#watchSbf').val();
        json['HowMany'] = $('#howMany').val();
        json['IsControlGrp'] = $("radio[name='controlGrp']:checked").val();
        json['IsExperimentalGrp'] = $("radio[name='experimentalGrp']:checked").val();

        return json;
      }


    </script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
  </body>
</html>

















